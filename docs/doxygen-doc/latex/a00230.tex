\hypertarget{a00230}{}\section{Components and Plugins\+: Core functions to be used by components}
\label{a00230}\index{Components and Plugins\+: Core functions to be used by components@{Components and Plugins\+: Core functions to be used by components}}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{a00230_gab527c1e0f243f057d31a724794ad9f88}{hwloc\+\_\+hide\+\_\+errors} (void)
\item 
\hyperlink{a00185_ga79b8ab56877ef99ac59b833203391c7d}{hwloc\+\_\+obj\+\_\+t} \hyperlink{a00230_ga1e105cfe3c8e77f34cc6df3841deebbc}{hwloc\+\_\+\+\_\+insert\+\_\+object\+\_\+by\+\_\+cpuset} (struct hwloc\+\_\+topology $\ast$topology, \hyperlink{a00185_ga79b8ab56877ef99ac59b833203391c7d}{hwloc\+\_\+obj\+\_\+t} root, \hyperlink{a00185_ga79b8ab56877ef99ac59b833203391c7d}{hwloc\+\_\+obj\+\_\+t} obj, const char $\ast$reason)
\item 
void \hyperlink{a00230_ga0ef97debde503b56367689b07bb3e901}{hwloc\+\_\+insert\+\_\+object\+\_\+by\+\_\+parent} (struct hwloc\+\_\+topology $\ast$topology, \hyperlink{a00185_ga79b8ab56877ef99ac59b833203391c7d}{hwloc\+\_\+obj\+\_\+t} parent, \hyperlink{a00185_ga79b8ab56877ef99ac59b833203391c7d}{hwloc\+\_\+obj\+\_\+t} obj)
\item 
\hyperlink{a00185_ga79b8ab56877ef99ac59b833203391c7d}{hwloc\+\_\+obj\+\_\+t} \hyperlink{a00230_ga0b5c75b2dc37cea2e8a29c4812baf4b3}{hwloc\+\_\+alloc\+\_\+setup\+\_\+object} (\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\+\_\+topology\+\_\+t} topology, \hyperlink{a00184_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\+\_\+obj\+\_\+type\+\_\+t} type, unsigned os\+\_\+index)
\item 
int \hyperlink{a00230_ga754b61041ceee9685534a2c5d3cd0156}{hwloc\+\_\+obj\+\_\+add\+\_\+children\+\_\+sets} (\hyperlink{a00185_ga79b8ab56877ef99ac59b833203391c7d}{hwloc\+\_\+obj\+\_\+t} obj)
\item 
int \hyperlink{a00230_ga120d8bd74922e1030b621409a6b0be61}{hwloc\+\_\+topology\+\_\+reconnect} (\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\+\_\+topology\+\_\+t} topology, unsigned long flags)
\item 
static int \hyperlink{a00230_gac2eaed287bb215cf0bd33014e9e1d374}{hwloc\+\_\+plugin\+\_\+check\+\_\+namespace} (const char $\ast$pluginname, const char $\ast$symbol)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyNote}{Note}
These structures and functions may change when \hyperlink{a00182_gaac5bc1f46f55e10ef0141a68ce70e21f}{H\+W\+L\+O\+C\+\_\+\+C\+O\+M\+P\+O\+N\+E\+N\+T\+\_\+\+A\+BI} is modified. 
\end{DoxyNote}


\subsection{Function Documentation}
\mbox{\Hypertarget{a00230_ga1e105cfe3c8e77f34cc6df3841deebbc}\label{a00230_ga1e105cfe3c8e77f34cc6df3841deebbc}} 
\index{Components and Plugins\+: Core functions to be used by components@{Components and Plugins\+: Core functions to be used by components}!hwloc\+\_\+\+\_\+insert\+\_\+object\+\_\+by\+\_\+cpuset@{hwloc\+\_\+\+\_\+insert\+\_\+object\+\_\+by\+\_\+cpuset}}
\index{hwloc\+\_\+\+\_\+insert\+\_\+object\+\_\+by\+\_\+cpuset@{hwloc\+\_\+\+\_\+insert\+\_\+object\+\_\+by\+\_\+cpuset}!Components and Plugins\+: Core functions to be used by components@{Components and Plugins\+: Core functions to be used by components}}
\subsubsection{\texorpdfstring{hwloc\+\_\+\+\_\+insert\+\_\+object\+\_\+by\+\_\+cpuset()}{hwloc\_\_insert\_object\_by\_cpuset()}}
{\footnotesize\ttfamily \hyperlink{a00185_ga79b8ab56877ef99ac59b833203391c7d}{hwloc\+\_\+obj\+\_\+t} hwloc\+\_\+\+\_\+insert\+\_\+object\+\_\+by\+\_\+cpuset (\begin{DoxyParamCaption}\item[{struct hwloc\+\_\+topology $\ast$}]{topology,  }\item[{\hyperlink{a00185_ga79b8ab56877ef99ac59b833203391c7d}{hwloc\+\_\+obj\+\_\+t}}]{root,  }\item[{\hyperlink{a00185_ga79b8ab56877ef99ac59b833203391c7d}{hwloc\+\_\+obj\+\_\+t}}]{obj,  }\item[{const char $\ast$}]{reason }\end{DoxyParamCaption})}



Add an object to the topology. 

Insert new object {\ttfamily obj} in the topology starting under existing object {\ttfamily root} (if {\ttfamily N\+U\+LL}, the topology root object is used).

It is sorted along the tree of other objects according to the inclusion of cpusets, to eventually be added as a child of the smallest object including this object.

If the cpuset is empty, the type of the object (and maybe some attributes) must be enough to find where to insert the object. This is especially true for N\+U\+MA nodes with memory and no C\+P\+Us.

The given object should not have children.

This shall only be called before levels are built.

The caller should check whether the object type is filtered-\/out before calling this function.

The topology cpuset/nodesets will be enlarged to include the object sets.

{\ttfamily reason} is a unique string identifying where and why this insertion call was performed (it will be displayed in case of internal insertion error).

Returns the object on success. Returns N\+U\+LL and frees obj on error. Returns another object and frees obj if it was merged with an identical pre-\/existing object. \mbox{\Hypertarget{a00230_ga0b5c75b2dc37cea2e8a29c4812baf4b3}\label{a00230_ga0b5c75b2dc37cea2e8a29c4812baf4b3}} 
\index{Components and Plugins\+: Core functions to be used by components@{Components and Plugins\+: Core functions to be used by components}!hwloc\+\_\+alloc\+\_\+setup\+\_\+object@{hwloc\+\_\+alloc\+\_\+setup\+\_\+object}}
\index{hwloc\+\_\+alloc\+\_\+setup\+\_\+object@{hwloc\+\_\+alloc\+\_\+setup\+\_\+object}!Components and Plugins\+: Core functions to be used by components@{Components and Plugins\+: Core functions to be used by components}}
\subsubsection{\texorpdfstring{hwloc\+\_\+alloc\+\_\+setup\+\_\+object()}{hwloc\_alloc\_setup\_object()}}
{\footnotesize\ttfamily \hyperlink{a00185_ga79b8ab56877ef99ac59b833203391c7d}{hwloc\+\_\+obj\+\_\+t} hwloc\+\_\+alloc\+\_\+setup\+\_\+object (\begin{DoxyParamCaption}\item[{\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\+\_\+topology\+\_\+t}}]{topology,  }\item[{\hyperlink{a00184_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\+\_\+obj\+\_\+type\+\_\+t}}]{type,  }\item[{unsigned}]{os\+\_\+index }\end{DoxyParamCaption})}



Allocate and initialize an object of the given type and physical index. 

If {\ttfamily os\+\_\+index} is unknown or irrelevant, use {\ttfamily H\+W\+L\+O\+C\+\_\+\+U\+N\+K\+N\+O\+W\+N\+\_\+\+I\+N\+D\+EX}. \mbox{\Hypertarget{a00230_gab527c1e0f243f057d31a724794ad9f88}\label{a00230_gab527c1e0f243f057d31a724794ad9f88}} 
\index{Components and Plugins\+: Core functions to be used by components@{Components and Plugins\+: Core functions to be used by components}!hwloc\+\_\+hide\+\_\+errors@{hwloc\+\_\+hide\+\_\+errors}}
\index{hwloc\+\_\+hide\+\_\+errors@{hwloc\+\_\+hide\+\_\+errors}!Components and Plugins\+: Core functions to be used by components@{Components and Plugins\+: Core functions to be used by components}}
\subsubsection{\texorpdfstring{hwloc\+\_\+hide\+\_\+errors()}{hwloc\_hide\_errors()}}
{\footnotesize\ttfamily int hwloc\+\_\+hide\+\_\+errors (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Check whether insertion errors are hidden. 

\mbox{\Hypertarget{a00230_ga0ef97debde503b56367689b07bb3e901}\label{a00230_ga0ef97debde503b56367689b07bb3e901}} 
\index{Components and Plugins\+: Core functions to be used by components@{Components and Plugins\+: Core functions to be used by components}!hwloc\+\_\+insert\+\_\+object\+\_\+by\+\_\+parent@{hwloc\+\_\+insert\+\_\+object\+\_\+by\+\_\+parent}}
\index{hwloc\+\_\+insert\+\_\+object\+\_\+by\+\_\+parent@{hwloc\+\_\+insert\+\_\+object\+\_\+by\+\_\+parent}!Components and Plugins\+: Core functions to be used by components@{Components and Plugins\+: Core functions to be used by components}}
\subsubsection{\texorpdfstring{hwloc\+\_\+insert\+\_\+object\+\_\+by\+\_\+parent()}{hwloc\_insert\_object\_by\_parent()}}
{\footnotesize\ttfamily void hwloc\+\_\+insert\+\_\+object\+\_\+by\+\_\+parent (\begin{DoxyParamCaption}\item[{struct hwloc\+\_\+topology $\ast$}]{topology,  }\item[{\hyperlink{a00185_ga79b8ab56877ef99ac59b833203391c7d}{hwloc\+\_\+obj\+\_\+t}}]{parent,  }\item[{\hyperlink{a00185_ga79b8ab56877ef99ac59b833203391c7d}{hwloc\+\_\+obj\+\_\+t}}]{obj }\end{DoxyParamCaption})}



Insert an object somewhere in the topology. 

It is added as the last child of the given parent. The cpuset is completely ignored, so strange objects such as I/O devices should preferably be inserted with this.

When used for \char`\"{}normal\char`\"{} children with cpusets (when importing from X\+ML when duplicating a topology), the caller should make sure that\+:
\begin{DoxyItemize}
\item children are inserted in order,
\item children cpusets do not intersect.
\end{DoxyItemize}

The given object may have normal, I/O or Misc children, as long as they are in order as well. These children must have valid parent and next\+\_\+sibling pointers.

The caller should check whether the object type is filtered-\/out before calling this function. \mbox{\Hypertarget{a00230_ga754b61041ceee9685534a2c5d3cd0156}\label{a00230_ga754b61041ceee9685534a2c5d3cd0156}} 
\index{Components and Plugins\+: Core functions to be used by components@{Components and Plugins\+: Core functions to be used by components}!hwloc\+\_\+obj\+\_\+add\+\_\+children\+\_\+sets@{hwloc\+\_\+obj\+\_\+add\+\_\+children\+\_\+sets}}
\index{hwloc\+\_\+obj\+\_\+add\+\_\+children\+\_\+sets@{hwloc\+\_\+obj\+\_\+add\+\_\+children\+\_\+sets}!Components and Plugins\+: Core functions to be used by components@{Components and Plugins\+: Core functions to be used by components}}
\subsubsection{\texorpdfstring{hwloc\+\_\+obj\+\_\+add\+\_\+children\+\_\+sets()}{hwloc\_obj\_add\_children\_sets()}}
{\footnotesize\ttfamily int hwloc\+\_\+obj\+\_\+add\+\_\+children\+\_\+sets (\begin{DoxyParamCaption}\item[{\hyperlink{a00185_ga79b8ab56877ef99ac59b833203391c7d}{hwloc\+\_\+obj\+\_\+t}}]{obj }\end{DoxyParamCaption})}



Setup object cpusets/nodesets by OR\textquotesingle{}ing its children. 

Used when adding an object late in the topology. Will update the new object by OR\textquotesingle{}ing all its new children sets.

Used when P\+CI backend adds a hostbridge parent, when distances add a new Group, etc. \mbox{\Hypertarget{a00230_gac2eaed287bb215cf0bd33014e9e1d374}\label{a00230_gac2eaed287bb215cf0bd33014e9e1d374}} 
\index{Components and Plugins\+: Core functions to be used by components@{Components and Plugins\+: Core functions to be used by components}!hwloc\+\_\+plugin\+\_\+check\+\_\+namespace@{hwloc\+\_\+plugin\+\_\+check\+\_\+namespace}}
\index{hwloc\+\_\+plugin\+\_\+check\+\_\+namespace@{hwloc\+\_\+plugin\+\_\+check\+\_\+namespace}!Components and Plugins\+: Core functions to be used by components@{Components and Plugins\+: Core functions to be used by components}}
\subsubsection{\texorpdfstring{hwloc\+\_\+plugin\+\_\+check\+\_\+namespace()}{hwloc\_plugin\_check\_namespace()}}
{\footnotesize\ttfamily static int hwloc\+\_\+plugin\+\_\+check\+\_\+namespace (\begin{DoxyParamCaption}\item[{const char $\ast$}]{pluginname,  }\item[{const char $\ast$}]{symbol }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Make sure that plugins can lookup core symbols. 

This is a sanity check to avoid lazy-\/lookup failures when libhwloc is loaded within a plugin, and later tries to load its own plugins. This may fail (and abort the program) if libhwloc symbols are in a private namespace.

\begin{DoxyReturn}{Returns}
0 on success. 

-\/1 if the plugin cannot be successfully loaded. The caller plugin init() callback should return a negative error code as well.
\end{DoxyReturn}
Plugins should call this function in their init() callback to avoid later crashes if lazy symbol resolution is used by the upper layer that loaded hwloc (e.\+g. Open\+CL implementations using dlopen with R\+T\+L\+D\+\_\+\+L\+A\+ZY).

\begin{DoxyNote}{Note}
The build system must define H\+W\+L\+O\+C\+\_\+\+I\+N\+S\+I\+D\+E\+\_\+\+P\+L\+U\+G\+IN if and only if building the caller as a plugin.

This function should remain inline so plugins can call it even when they cannot find libhwloc symbols. 
\end{DoxyNote}
\mbox{\Hypertarget{a00230_ga120d8bd74922e1030b621409a6b0be61}\label{a00230_ga120d8bd74922e1030b621409a6b0be61}} 
\index{Components and Plugins\+: Core functions to be used by components@{Components and Plugins\+: Core functions to be used by components}!hwloc\+\_\+topology\+\_\+reconnect@{hwloc\+\_\+topology\+\_\+reconnect}}
\index{hwloc\+\_\+topology\+\_\+reconnect@{hwloc\+\_\+topology\+\_\+reconnect}!Components and Plugins\+: Core functions to be used by components@{Components and Plugins\+: Core functions to be used by components}}
\subsubsection{\texorpdfstring{hwloc\+\_\+topology\+\_\+reconnect()}{hwloc\_topology\_reconnect()}}
{\footnotesize\ttfamily int hwloc\+\_\+topology\+\_\+reconnect (\begin{DoxyParamCaption}\item[{\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\+\_\+topology\+\_\+t}}]{topology,  }\item[{unsigned long}]{flags }\end{DoxyParamCaption})}



Request a reconnection of children and levels in the topology. 

May be used by backends during discovery if they need arrays or lists of object within levels or children to be fully connected.

{\ttfamily flags} is currently unused, must 0. 