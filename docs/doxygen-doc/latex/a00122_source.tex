\hypertarget{a00122_source}{}\section{helper.\+h}
\label{a00122_source}\index{helper.\+h@{helper.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{/*}
00002 \textcolor{comment}{ * Copyright © 2009 CNRS}
00003 \textcolor{comment}{ * Copyright © 2009-2020 Inria.  All rights reserved.}
00004 \textcolor{comment}{ * Copyright © 2009-2012 Université Bordeaux}
00005 \textcolor{comment}{ * Copyright © 2009-2010 Cisco Systems, Inc.  All rights reserved.}
00006 \textcolor{comment}{ * See COPYING in top-level directory.}
00007 \textcolor{comment}{ */}
00008 
00013 \textcolor{preprocessor}{#ifndef HWLOC\_HELPER\_H}
00014 \textcolor{preprocessor}{#define HWLOC\_HELPER\_H}
00015 
00016 \textcolor{preprocessor}{#ifndef HWLOC\_H}
00017 \textcolor{preprocessor}{#error Please include the main hwloc.h instead}
00018 \textcolor{preprocessor}{#endif}
00019 
00020 \textcolor{preprocessor}{#include <stdlib.h>}
00021 \textcolor{preprocessor}{#include <errno.h>}
00022 
00023 
00024 \textcolor{preprocessor}{#ifdef \_\_cplusplus}
00025 \textcolor{keyword}{extern} \textcolor{stringliteral}{"C"} \{
00026 \textcolor{preprocessor}{#endif}
00027 
00028 
00041 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l00042}\hyperlink{a00195_ga547325a4193dbc215d07c23097519d79}{00042} \hyperlink{a00195_ga547325a4193dbc215d07c23097519d79}{hwloc\_get\_first\_largest\_obj\_inside\_cpuset}(
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \textcolor{keyword}{set})
00043 \{
00044   \hyperlink{a00238}{hwloc\_obj\_t} obj = \hyperlink{a00187_ga2d4b12fc187dfc53b35f2fa21d21044d}{hwloc\_get\_root\_obj}(topology);
00045   \textcolor{keywordflow}{if} (!\hyperlink{a00205_gaefa070f9232857ba5a57297ea9a08ea2}{hwloc\_bitmap\_intersects}(obj->\hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00046     \textcolor{keywordflow}{return} NULL;
00047   \textcolor{keywordflow}{while} (!\hyperlink{a00205_ga0526e03db81956fb02acc8260b66d6a4}{hwloc\_bitmap\_isincluded}(obj->\hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set})) \{
00048     \textcolor{comment}{/* while the object intersects without being included, look at its children */}
00049     \hyperlink{a00238}{hwloc\_obj\_t} child = obj->\hyperlink{a00238_af51d08a0a79dba517c06c5afedc8d2dc}{first\_child};
00050     \textcolor{keywordflow}{while} (child) \{
00051       \textcolor{keywordflow}{if} (\hyperlink{a00205_gaefa070f9232857ba5a57297ea9a08ea2}{hwloc\_bitmap\_intersects}(child->\hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00052         \textcolor{keywordflow}{break};
00053       child = child->\hyperlink{a00238_a7f2343ed476fe4942e6fffd4cade1b40}{next\_sibling};
00054     \}
00055     \textcolor{keywordflow}{if} (!child)
00056       \textcolor{comment}{/* no child intersects, return their father */}
00057       \textcolor{keywordflow}{return} obj;
00058     \textcolor{comment}{/* found one intersecting child, look at its children */}
00059     obj = child;
00060   \}
00061   \textcolor{comment}{/* obj is included, return it */}
00062   \textcolor{keywordflow}{return} obj;
00063 \}
00064 
00069 HWLOC\_DECLSPEC \textcolor{keywordtype}{int} \hyperlink{a00195_ga34ca563fa3a6a4e05268f36a87668511}{hwloc\_get\_largest\_objs\_inside\_cpuset} (
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \textcolor{keyword}{set},
00070                                                  \hyperlink{a00238}{hwloc\_obj\_t} * \_\_hwloc\_restrict objs, \textcolor{keywordtype}{int} max);
00071 
00084 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l00085}\hyperlink{a00195_ga63e3784e7c60fbae5073428cb98ac787}{00085} \hyperlink{a00195_ga63e3784e7c60fbae5073428cb98ac787}{hwloc\_get\_next\_obj\_inside\_cpuset\_by\_depth} (
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \textcolor{keyword}{set},
00086                                            \textcolor{keywordtype}{int} depth, \hyperlink{a00238}{hwloc\_obj\_t} prev)
00087 \{
00088   \hyperlink{a00238}{hwloc\_obj\_t} next = \hyperlink{a00187_gac140a9b939d9fa0b30c4a910efcb0656}{hwloc\_get\_next\_obj\_by\_depth}(topology, depth, 
      prev);
00089   \textcolor{keywordflow}{if} (!next)
00090     \textcolor{keywordflow}{return} NULL;
00091   \textcolor{keywordflow}{while} (next && (\hyperlink{a00205_ga5b64be28f5a7176ed8ad0d6a90bdf108}{hwloc\_bitmap\_iszero}(next->\hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}) || !
      \hyperlink{a00205_ga0526e03db81956fb02acc8260b66d6a4}{hwloc\_bitmap\_isincluded}(next->\hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set})))
00092     next = next->\hyperlink{a00238_a85a788017457129589318b6c39451acf}{next\_cousin};
00093   \textcolor{keywordflow}{return} next;
00094 \}
00095 
00108 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l00109}\hyperlink{a00195_gafe859176cf9233f215fea0e87cef47e7}{00109} \hyperlink{a00195_gafe859176cf9233f215fea0e87cef47e7}{hwloc\_get\_next\_obj\_inside\_cpuset\_by\_type} (
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \textcolor{keyword}{set},
00110                                           \hyperlink{a00184_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_obj\_type\_t} type, 
      \hyperlink{a00238}{hwloc\_obj\_t} prev)
00111 \{
00112   \textcolor{keywordtype}{int} depth = \hyperlink{a00187_ga8bec782e21be313750da70cf7428b374}{hwloc\_get\_type\_depth}(topology, type);
00113   \textcolor{keywordflow}{if} (depth == \hyperlink{a00187_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC\_TYPE\_DEPTH\_UNKNOWN} || depth == 
      \hyperlink{a00187_ggaf4e663cf42bbe20756b849c6293ef575ae99465995cacde6c210d5fc2e409798c}{HWLOC\_TYPE\_DEPTH\_MULTIPLE})
00114     \textcolor{keywordflow}{return} NULL;
00115   \textcolor{keywordflow}{return} \hyperlink{a00195_ga63e3784e7c60fbae5073428cb98ac787}{hwloc\_get\_next\_obj\_inside\_cpuset\_by\_depth}(topology, \textcolor{keyword}{set}, 
      depth, prev);
00116 \}
00117 
00126 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
00127 \hyperlink{a00195_gaec86f1f88832836e3f9338e246ea5862}{hwloc\_get\_obj\_inside\_cpuset\_by\_depth} (
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \textcolor{keyword}{set},
00128                                       \textcolor{keywordtype}{int} depth, \textcolor{keywordtype}{unsigned} idx) \_\_hwloc\_attribute\_pure;
00129 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l00130}\hyperlink{a00195_gaec86f1f88832836e3f9338e246ea5862}{00130} \hyperlink{a00195_gaec86f1f88832836e3f9338e246ea5862}{hwloc\_get\_obj\_inside\_cpuset\_by\_depth} (
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \textcolor{keyword}{set},
00131                                       \textcolor{keywordtype}{int} depth, \textcolor{keywordtype}{unsigned} idx)
00132 \{
00133   \hyperlink{a00238}{hwloc\_obj\_t} obj = \hyperlink{a00187_ga391f6b2613f0065673eaa4069b93d4e0}{hwloc\_get\_obj\_by\_depth} (topology, depth, 0);
00134   \textcolor{keywordtype}{unsigned} count = 0;
00135   \textcolor{keywordflow}{if} (!obj)
00136     \textcolor{keywordflow}{return} NULL;
00137   \textcolor{keywordflow}{while} (obj) \{
00138     \textcolor{keywordflow}{if} (!\hyperlink{a00205_ga5b64be28f5a7176ed8ad0d6a90bdf108}{hwloc\_bitmap\_iszero}(obj->\hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}) && 
      \hyperlink{a00205_ga0526e03db81956fb02acc8260b66d6a4}{hwloc\_bitmap\_isincluded}(obj->\hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set})) \{
00139       \textcolor{keywordflow}{if} (count == idx)
00140         \textcolor{keywordflow}{return} obj;
00141       count++;
00142     \}
00143     obj = obj->\hyperlink{a00238_a85a788017457129589318b6c39451acf}{next\_cousin};
00144   \}
00145   \textcolor{keywordflow}{return} NULL;
00146 \}
00147 
00160 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
00161 \hyperlink{a00195_ga2edf924e5a0cca9cb22f65cc77c6ddb5}{hwloc\_get\_obj\_inside\_cpuset\_by\_type} (
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \textcolor{keyword}{set},
00162                                      \hyperlink{a00184_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_obj\_type\_t} type, \textcolor{keywordtype}{unsigned} idx) 
      \_\_hwloc\_attribute\_pure;
00163 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l00164}\hyperlink{a00195_ga2edf924e5a0cca9cb22f65cc77c6ddb5}{00164} \hyperlink{a00195_ga2edf924e5a0cca9cb22f65cc77c6ddb5}{hwloc\_get\_obj\_inside\_cpuset\_by\_type} (
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \textcolor{keyword}{set},
00165                                      \hyperlink{a00184_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_obj\_type\_t} type, \textcolor{keywordtype}{unsigned} idx)
00166 \{
00167   \textcolor{keywordtype}{int} depth = \hyperlink{a00187_ga8bec782e21be313750da70cf7428b374}{hwloc\_get\_type\_depth}(topology, type);
00168   \textcolor{keywordflow}{if} (depth == \hyperlink{a00187_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC\_TYPE\_DEPTH\_UNKNOWN} || depth == 
      \hyperlink{a00187_ggaf4e663cf42bbe20756b849c6293ef575ae99465995cacde6c210d5fc2e409798c}{HWLOC\_TYPE\_DEPTH\_MULTIPLE})
00169     \textcolor{keywordflow}{return} NULL;
00170   \textcolor{keywordflow}{return} \hyperlink{a00195_gaec86f1f88832836e3f9338e246ea5862}{hwloc\_get\_obj\_inside\_cpuset\_by\_depth}(topology, \textcolor{keyword}{set}, depth, idx
      );
00171 \}
00172 
00181 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{unsigned}
00182 \hyperlink{a00195_gaa43c64512ddb33fd181990c4261cec7d}{hwloc\_get\_nbobjs\_inside\_cpuset\_by\_depth} (
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \textcolor{keyword}{set},
00183                                          \textcolor{keywordtype}{int} depth) \_\_hwloc\_attribute\_pure;
00184 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{unsigned}
\Hypertarget{a00122_source_l00185}\hyperlink{a00195_gaa43c64512ddb33fd181990c4261cec7d}{00185} \hyperlink{a00195_gaa43c64512ddb33fd181990c4261cec7d}{hwloc\_get\_nbobjs\_inside\_cpuset\_by\_depth} (
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \textcolor{keyword}{set},
00186                                          \textcolor{keywordtype}{int} depth)
00187 \{
00188   \hyperlink{a00238}{hwloc\_obj\_t} obj = \hyperlink{a00187_ga391f6b2613f0065673eaa4069b93d4e0}{hwloc\_get\_obj\_by\_depth} (topology, depth, 0);
00189   \textcolor{keywordtype}{unsigned} count = 0;
00190   \textcolor{keywordflow}{if} (!obj)
00191     \textcolor{keywordflow}{return} 0;
00192   \textcolor{keywordflow}{while} (obj) \{
00193     \textcolor{keywordflow}{if} (!\hyperlink{a00205_ga5b64be28f5a7176ed8ad0d6a90bdf108}{hwloc\_bitmap\_iszero}(obj->\hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}) && 
      \hyperlink{a00205_ga0526e03db81956fb02acc8260b66d6a4}{hwloc\_bitmap\_isincluded}(obj->\hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00194       count++;
00195     obj = obj->\hyperlink{a00238_a85a788017457129589318b6c39451acf}{next\_cousin};
00196   \}
00197   \textcolor{keywordflow}{return} count;
00198 \}
00199 
00212 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
00213 \hyperlink{a00195_ga133c40415de008518608f8bff52a5ab9}{hwloc\_get\_nbobjs\_inside\_cpuset\_by\_type} (
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \textcolor{keyword}{set},
00214                                         \hyperlink{a00184_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_obj\_type\_t} type) \_\_hwloc\_attribute\_pure;
00215 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\Hypertarget{a00122_source_l00216}\hyperlink{a00195_ga133c40415de008518608f8bff52a5ab9}{00216} \hyperlink{a00195_ga133c40415de008518608f8bff52a5ab9}{hwloc\_get\_nbobjs\_inside\_cpuset\_by\_type} (
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \textcolor{keyword}{set},
00217                                         \hyperlink{a00184_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_obj\_type\_t} type)
00218 \{
00219   \textcolor{keywordtype}{int} depth = \hyperlink{a00187_ga8bec782e21be313750da70cf7428b374}{hwloc\_get\_type\_depth}(topology, type);
00220   \textcolor{keywordflow}{if} (depth == \hyperlink{a00187_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC\_TYPE\_DEPTH\_UNKNOWN})
00221     \textcolor{keywordflow}{return} 0;
00222   \textcolor{keywordflow}{if} (depth == \hyperlink{a00187_ggaf4e663cf42bbe20756b849c6293ef575ae99465995cacde6c210d5fc2e409798c}{HWLOC\_TYPE\_DEPTH\_MULTIPLE})
00223     \textcolor{keywordflow}{return} -1; \textcolor{comment}{/* FIXME: agregate nbobjs from different levels? */}
00224   \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int}) \hyperlink{a00195_gaa43c64512ddb33fd181990c4261cec7d}{hwloc\_get\_nbobjs\_inside\_cpuset\_by\_depth}(topology, \textcolor{keyword}{set}
      , depth);
00225 \}
00226 
00240 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
00241 \hyperlink{a00195_ga4c3a20d61e9beb06c667b21688c772c5}{hwloc\_get\_obj\_index\_inside\_cpuset} (
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology \_\_hwloc\_attribute\_unused, 
      \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \textcolor{keyword}{set},
00242                                    \hyperlink{a00238}{hwloc\_obj\_t} obj) \_\_hwloc\_attribute\_pure;
00243 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\Hypertarget{a00122_source_l00244}\hyperlink{a00195_ga4c3a20d61e9beb06c667b21688c772c5}{00244} \hyperlink{a00195_ga4c3a20d61e9beb06c667b21688c772c5}{hwloc\_get\_obj\_index\_inside\_cpuset} (
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology \_\_hwloc\_attribute\_unused, 
      \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \textcolor{keyword}{set},
00245                                    \hyperlink{a00238}{hwloc\_obj\_t} obj)
00246 \{
00247   \textcolor{keywordtype}{int} idx = 0;
00248   \textcolor{keywordflow}{if} (!\hyperlink{a00205_ga0526e03db81956fb02acc8260b66d6a4}{hwloc\_bitmap\_isincluded}(obj->\hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00249     \textcolor{keywordflow}{return} -1;
00250   \textcolor{comment}{/* count how many objects are inside the cpuset on the way from us to the beginning of the level */}
00251   \textcolor{keywordflow}{while} ((obj = obj->\hyperlink{a00238_ac715989f55ff5a0eb6be2969ee477ec0}{prev\_cousin}) != NULL)
00252     \textcolor{keywordflow}{if} (!\hyperlink{a00205_ga5b64be28f5a7176ed8ad0d6a90bdf108}{hwloc\_bitmap\_iszero}(obj->\hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}) && 
      \hyperlink{a00205_ga0526e03db81956fb02acc8260b66d6a4}{hwloc\_bitmap\_isincluded}(obj->\hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keyword}{set}))
00253       idx++;
00254   \textcolor{keywordflow}{return} idx;
00255 \}
00256 
00271 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
00272 \hyperlink{a00196_ga0e66aa2dc6b2527cfd10723af646c9d7}{hwloc\_get\_child\_covering\_cpuset} (\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology 
      \_\_hwloc\_attribute\_unused, \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \textcolor{keyword}{set},
00273                                 \hyperlink{a00238}{hwloc\_obj\_t} parent) \_\_hwloc\_attribute\_pure;
00274 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l00275}\hyperlink{a00196_ga0e66aa2dc6b2527cfd10723af646c9d7}{00275} \hyperlink{a00196_ga0e66aa2dc6b2527cfd10723af646c9d7}{hwloc\_get\_child\_covering\_cpuset} (\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology 
      \_\_hwloc\_attribute\_unused, \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \textcolor{keyword}{set},
00276                                 \hyperlink{a00238}{hwloc\_obj\_t} parent)
00277 \{
00278   \hyperlink{a00238}{hwloc\_obj\_t} child;
00279   \textcolor{keywordflow}{if} (\hyperlink{a00205_ga5b64be28f5a7176ed8ad0d6a90bdf108}{hwloc\_bitmap\_iszero}(\textcolor{keyword}{set}))
00280     \textcolor{keywordflow}{return} NULL;
00281   child = parent->\hyperlink{a00238_af51d08a0a79dba517c06c5afedc8d2dc}{first\_child};
00282   \textcolor{keywordflow}{while} (child) \{
00283     \textcolor{keywordflow}{if} (child->\hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset} && \hyperlink{a00205_ga0526e03db81956fb02acc8260b66d6a4}{hwloc\_bitmap\_isincluded}(\textcolor{keyword}{set}, child->
      \hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}))
00284       \textcolor{keywordflow}{return} child;
00285     child = child->\hyperlink{a00238_a7f2343ed476fe4942e6fffd4cade1b40}{next\_sibling};
00286   \}
00287   \textcolor{keywordflow}{return} NULL;
00288 \}
00289 
00294 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
00295 \hyperlink{a00196_ga41acdcdbb8b95d70ecf6c572a3f67dca}{hwloc\_get\_obj\_covering\_cpuset} (\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, 
      \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \textcolor{keyword}{set}) \_\_hwloc\_attribute\_pure;
00296 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l00297}\hyperlink{a00196_ga41acdcdbb8b95d70ecf6c572a3f67dca}{00297} \hyperlink{a00196_ga41acdcdbb8b95d70ecf6c572a3f67dca}{hwloc\_get\_obj\_covering\_cpuset} (\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, 
      \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \textcolor{keyword}{set})
00298 \{
00299   \textcolor{keyword}{struct }\hyperlink{a00238}{hwloc\_obj} *current = \hyperlink{a00187_ga2d4b12fc187dfc53b35f2fa21d21044d}{hwloc\_get\_root\_obj}(topology);
00300   \textcolor{keywordflow}{if} (\hyperlink{a00205_ga5b64be28f5a7176ed8ad0d6a90bdf108}{hwloc\_bitmap\_iszero}(\textcolor{keyword}{set}) || !\hyperlink{a00205_ga0526e03db81956fb02acc8260b66d6a4}{hwloc\_bitmap\_isincluded}(\textcolor{keyword}{set}, 
      current->\hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}))
00301     \textcolor{keywordflow}{return} NULL;
00302   \textcolor{keywordflow}{while} (1) \{
00303     \hyperlink{a00238}{hwloc\_obj\_t} child = \hyperlink{a00196_ga0e66aa2dc6b2527cfd10723af646c9d7}{hwloc\_get\_child\_covering\_cpuset}(topology,
       \textcolor{keyword}{set}, current);
00304     \textcolor{keywordflow}{if} (!child)
00305       \textcolor{keywordflow}{return} current;
00306     current = child;
00307   \}
00308 \}
00309 
00320 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l00321}\hyperlink{a00196_gaba4b6d86eba1169ced4b0e941d2bb5f0}{00321} \hyperlink{a00196_gaba4b6d86eba1169ced4b0e941d2bb5f0}{hwloc\_get\_next\_obj\_covering\_cpuset\_by\_depth}(
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \textcolor{keyword}{set},
00322                                             \textcolor{keywordtype}{int} depth, \hyperlink{a00238}{hwloc\_obj\_t} prev)
00323 \{
00324   \hyperlink{a00238}{hwloc\_obj\_t} next = \hyperlink{a00187_gac140a9b939d9fa0b30c4a910efcb0656}{hwloc\_get\_next\_obj\_by\_depth}(topology, depth, 
      prev);
00325   \textcolor{keywordflow}{if} (!next)
00326     \textcolor{keywordflow}{return} NULL;
00327   \textcolor{keywordflow}{while} (next && !\hyperlink{a00205_gaefa070f9232857ba5a57297ea9a08ea2}{hwloc\_bitmap\_intersects}(\textcolor{keyword}{set}, next->
      \hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}))
00328     next = next->\hyperlink{a00238_a85a788017457129589318b6c39451acf}{next\_cousin};
00329   \textcolor{keywordflow}{return} next;
00330 \}
00331 
00347 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l00348}\hyperlink{a00196_ga91cfae08b092e7966002e15d1e987213}{00348} \hyperlink{a00196_ga91cfae08b092e7966002e15d1e987213}{hwloc\_get\_next\_obj\_covering\_cpuset\_by\_type}(
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \textcolor{keyword}{set},
00349                                            \hyperlink{a00184_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_obj\_type\_t} type, 
      \hyperlink{a00238}{hwloc\_obj\_t} prev)
00350 \{
00351   \textcolor{keywordtype}{int} depth = \hyperlink{a00187_ga8bec782e21be313750da70cf7428b374}{hwloc\_get\_type\_depth}(topology, type);
00352   \textcolor{keywordflow}{if} (depth == \hyperlink{a00187_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC\_TYPE\_DEPTH\_UNKNOWN} || depth == 
      \hyperlink{a00187_ggaf4e663cf42bbe20756b849c6293ef575ae99465995cacde6c210d5fc2e409798c}{HWLOC\_TYPE\_DEPTH\_MULTIPLE})
00353     \textcolor{keywordflow}{return} NULL;
00354   \textcolor{keywordflow}{return} \hyperlink{a00196_gaba4b6d86eba1169ced4b0e941d2bb5f0}{hwloc\_get\_next\_obj\_covering\_cpuset\_by\_depth}(topology, \textcolor{keyword}{
      set}, depth, prev);
00355 \}
00356 
00377 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
00378 \hyperlink{a00197_ga9f8c93fde236e9642a96957af01a11cb}{hwloc\_get\_ancestor\_obj\_by\_depth} (\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology 
      \_\_hwloc\_attribute\_unused, \textcolor{keywordtype}{int} depth, \hyperlink{a00238}{hwloc\_obj\_t} obj) \_\_hwloc\_attribute\_pure;
00379 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l00380}\hyperlink{a00197_ga9f8c93fde236e9642a96957af01a11cb}{00380} \hyperlink{a00197_ga9f8c93fde236e9642a96957af01a11cb}{hwloc\_get\_ancestor\_obj\_by\_depth} (\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology 
      \_\_hwloc\_attribute\_unused, \textcolor{keywordtype}{int} depth, \hyperlink{a00238}{hwloc\_obj\_t} obj)
00381 \{
00382   \hyperlink{a00238}{hwloc\_obj\_t} ancestor = obj;
00383   \textcolor{keywordflow}{if} (obj->\hyperlink{a00238_a4876fd165b4fff35521f07ebd85355ed}{depth} < depth)
00384     \textcolor{keywordflow}{return} NULL;
00385   \textcolor{keywordflow}{while} (ancestor && ancestor->\hyperlink{a00238_a4876fd165b4fff35521f07ebd85355ed}{depth} > depth)
00386     ancestor = ancestor->\hyperlink{a00238_adc494f6aed939992be1c55cca5822900}{parent};
00387   \textcolor{keywordflow}{return} ancestor;
00388 \}
00389 
00397 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
00398 \hyperlink{a00197_ga70f0c7583291da707c15ae4daa850f41}{hwloc\_get\_ancestor\_obj\_by\_type} (\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology 
      \_\_hwloc\_attribute\_unused, \hyperlink{a00184_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_obj\_type\_t} type, \hyperlink{a00238}{hwloc\_obj\_t} obj) 
      \_\_hwloc\_attribute\_pure;
00399 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l00400}\hyperlink{a00197_ga70f0c7583291da707c15ae4daa850f41}{00400} \hyperlink{a00197_ga70f0c7583291da707c15ae4daa850f41}{hwloc\_get\_ancestor\_obj\_by\_type} (\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology 
      \_\_hwloc\_attribute\_unused, \hyperlink{a00184_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_obj\_type\_t} type, \hyperlink{a00238}{hwloc\_obj\_t} obj)
00401 \{
00402   \hyperlink{a00238}{hwloc\_obj\_t} ancestor = obj->\hyperlink{a00238_adc494f6aed939992be1c55cca5822900}{parent};
00403   \textcolor{keywordflow}{while} (ancestor && ancestor->\hyperlink{a00238_acc4f0803f244867e68fe0036800be5de}{type} != type)
00404     ancestor = ancestor->\hyperlink{a00238_adc494f6aed939992be1c55cca5822900}{parent};
00405   \textcolor{keywordflow}{return} ancestor;
00406 \}
00407 
00409 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
00410 \hyperlink{a00197_gab1fa883021928b5c476911c4102e9be3}{hwloc\_get\_common\_ancestor\_obj} (\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology 
      \_\_hwloc\_attribute\_unused, \hyperlink{a00238}{hwloc\_obj\_t} obj1, \hyperlink{a00238}{hwloc\_obj\_t} obj2) \_\_hwloc\_attribute\_pure;
00411 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l00412}\hyperlink{a00197_gab1fa883021928b5c476911c4102e9be3}{00412} \hyperlink{a00197_gab1fa883021928b5c476911c4102e9be3}{hwloc\_get\_common\_ancestor\_obj} (\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology 
      \_\_hwloc\_attribute\_unused, \hyperlink{a00238}{hwloc\_obj\_t} obj1, \hyperlink{a00238}{hwloc\_obj\_t} obj2)
00413 \{
00414   \textcolor{comment}{/* the loop isn't so easy since intermediate ancestors may have}
00415 \textcolor{comment}{   * different depth, causing us to alternate between using obj1->parent}
00416 \textcolor{comment}{   * and obj2->parent. Also, even if at some point we find ancestors of}
00417 \textcolor{comment}{   * of the same depth, their ancestors may have different depth again.}
00418 \textcolor{comment}{   */}
00419   \textcolor{keywordflow}{while} (obj1 != obj2) \{
00420     \textcolor{keywordflow}{while} (obj1->\hyperlink{a00238_a4876fd165b4fff35521f07ebd85355ed}{depth} > obj2->\hyperlink{a00238_a4876fd165b4fff35521f07ebd85355ed}{depth})
00421       obj1 = obj1->\hyperlink{a00238_adc494f6aed939992be1c55cca5822900}{parent};
00422     \textcolor{keywordflow}{while} (obj2->\hyperlink{a00238_a4876fd165b4fff35521f07ebd85355ed}{depth} > obj1->\hyperlink{a00238_a4876fd165b4fff35521f07ebd85355ed}{depth})
00423       obj2 = obj2->\hyperlink{a00238_adc494f6aed939992be1c55cca5822900}{parent};
00424     \textcolor{keywordflow}{if} (obj1 != obj2 && obj1->\hyperlink{a00238_a4876fd165b4fff35521f07ebd85355ed}{depth} == obj2->\hyperlink{a00238_a4876fd165b4fff35521f07ebd85355ed}{depth}) \{
00425       obj1 = obj1->\hyperlink{a00238_adc494f6aed939992be1c55cca5822900}{parent};
00426       obj2 = obj2->\hyperlink{a00238_adc494f6aed939992be1c55cca5822900}{parent};
00427     \}
00428   \}
00429   \textcolor{keywordflow}{return} obj1;
00430 \}
00431 
00437 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
00438 \hyperlink{a00197_ga408cf74f5bf9ed497911a320c7f8cc56}{hwloc\_obj\_is\_in\_subtree} (\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology 
      \_\_hwloc\_attribute\_unused, \hyperlink{a00238}{hwloc\_obj\_t} obj, \hyperlink{a00238}{hwloc\_obj\_t} subtree\_root) \_\_hwloc\_attribute\_pure;
00439 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\Hypertarget{a00122_source_l00440}\hyperlink{a00197_ga408cf74f5bf9ed497911a320c7f8cc56}{00440} \hyperlink{a00197_ga408cf74f5bf9ed497911a320c7f8cc56}{hwloc\_obj\_is\_in\_subtree} (\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology 
      \_\_hwloc\_attribute\_unused, \hyperlink{a00238}{hwloc\_obj\_t} obj, \hyperlink{a00238}{hwloc\_obj\_t} subtree\_root)
00441 \{
00442   \textcolor{keywordflow}{return} obj->\hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset} && subtree\_root->\hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset} && 
      \hyperlink{a00205_ga0526e03db81956fb02acc8260b66d6a4}{hwloc\_bitmap\_isincluded}(obj->\hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, subtree\_root->
      \hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset});
00443 \}
00444 
00455 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l00456}\hyperlink{a00197_ga12d8565a3436c565e791ed02a0353621}{00456} \hyperlink{a00197_ga12d8565a3436c565e791ed02a0353621}{hwloc\_get\_next\_child} (\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology 
      \_\_hwloc\_attribute\_unused, \hyperlink{a00238}{hwloc\_obj\_t} parent, \hyperlink{a00238}{hwloc\_obj\_t} prev)
00457 \{
00458   \hyperlink{a00238}{hwloc\_obj\_t} obj;
00459   \textcolor{keywordtype}{int} state = 0;
00460   \textcolor{keywordflow}{if} (prev) \{
00461     \textcolor{keywordflow}{if} (prev->\hyperlink{a00238_acc4f0803f244867e68fe0036800be5de}{type} == \hyperlink{a00184_ggacd37bb612667dc437d66bfb175a8dc55a19f8a6953fa91efc76bcbcdf2d22de4d}{HWLOC\_OBJ\_MISC})
00462       state = 3;
00463     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (prev->\hyperlink{a00238_acc4f0803f244867e68fe0036800be5de}{type} == \hyperlink{a00184_ggacd37bb612667dc437d66bfb175a8dc55a6825f10895fea60aca7a6ba9fe273db0}{HWLOC\_OBJ\_BRIDGE} || prev->\hyperlink{a00238_acc4f0803f244867e68fe0036800be5de}{type} == 
      \hyperlink{a00184_ggacd37bb612667dc437d66bfb175a8dc55a5d8117a54df1fbd3606ab19e42cb0ea9}{HWLOC\_OBJ\_PCI\_DEVICE} || prev->\hyperlink{a00238_acc4f0803f244867e68fe0036800be5de}{type} == 
      \hyperlink{a00184_ggacd37bb612667dc437d66bfb175a8dc55a51e7280240fd9f25589cbbe538bdb075}{HWLOC\_OBJ\_OS\_DEVICE})
00464       state = 2;
00465     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (prev->\hyperlink{a00238_acc4f0803f244867e68fe0036800be5de}{type} == \hyperlink{a00184_ggacd37bb612667dc437d66bfb175a8dc55a9d917a3e5497950c6d8948b8e183db5a}{HWLOC\_OBJ\_NUMANODE})
00466       state = 1;
00467     obj = prev->\hyperlink{a00238_a7f2343ed476fe4942e6fffd4cade1b40}{next\_sibling};
00468   \} \textcolor{keywordflow}{else} \{
00469     obj = parent->\hyperlink{a00238_af51d08a0a79dba517c06c5afedc8d2dc}{first\_child};
00470   \}
00471   \textcolor{keywordflow}{if} (!obj && state == 0) \{
00472     obj = parent->\hyperlink{a00238_ac0e8200dba25b90d5954bd4ec61f97d3}{memory\_first\_child};
00473     state = 1;
00474   \}
00475   \textcolor{keywordflow}{if} (!obj && state == 1) \{
00476     obj = parent->\hyperlink{a00238_a8d14c88e1ebc4ae67cc69f9e928558b3}{io\_first\_child};
00477     state = 2;
00478   \}
00479   \textcolor{keywordflow}{if} (!obj && state == 2) \{
00480     obj = parent->\hyperlink{a00238_a57812a313fe9b1a9500489f47c3011cc}{misc\_first\_child};
00481     state = 3;
00482   \}
00483   \textcolor{keywordflow}{return} obj;
00484 \}
00485 
00512 HWLOC\_DECLSPEC \textcolor{keywordtype}{int}
00513 \hyperlink{a00198_ga52ef38431eba383b048b98c669b59a16}{hwloc\_obj\_type\_is\_normal}(\hyperlink{a00184_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_obj\_type\_t} type);
00514 
00523 HWLOC\_DECLSPEC \textcolor{keywordtype}{int}
00524 \hyperlink{a00198_gac8a954ed37a4376097234c828068cbef}{hwloc\_obj\_type\_is\_io}(\hyperlink{a00184_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_obj\_type\_t} type);
00525 
00534 HWLOC\_DECLSPEC \textcolor{keywordtype}{int}
00535 \hyperlink{a00198_ga1d074390c8a3dc3088d84f73fb73f966}{hwloc\_obj\_type\_is\_memory}(\hyperlink{a00184_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_obj\_type\_t} type);
00536 
00543 HWLOC\_DECLSPEC \textcolor{keywordtype}{int}
00544 \hyperlink{a00198_ga2ed589bea28711e80b92066510a5607d}{hwloc\_obj\_type\_is\_cache}(\hyperlink{a00184_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_obj\_type\_t} type);
00545 
00552 HWLOC\_DECLSPEC \textcolor{keywordtype}{int}
00553 \hyperlink{a00198_ga395e48cd221d107e5891689624e1aec4}{hwloc\_obj\_type\_is\_dcache}(\hyperlink{a00184_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_obj\_type\_t} type);
00554 
00561 HWLOC\_DECLSPEC \textcolor{keywordtype}{int}
00562 \hyperlink{a00198_ga8abcee67b9b074332c1866405a3648a9}{hwloc\_obj\_type\_is\_icache}(\hyperlink{a00184_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_obj\_type\_t} type);
00563 
00593 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\Hypertarget{a00122_source_l00594}\hyperlink{a00199_gad108a09ce400222fe45545257d575489}{00594} \hyperlink{a00199_gad108a09ce400222fe45545257d575489}{hwloc\_get\_cache\_type\_depth} (\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology,
00595                             \textcolor{keywordtype}{unsigned} cachelevel, \hyperlink{a00184_gab6e1e7efedae8b341f3ee14fbe53d66c}{hwloc\_obj\_cache\_type\_t} cachetype)
00596 \{
00597   \textcolor{keywordtype}{int} \hyperlink{a00238_a4876fd165b4fff35521f07ebd85355ed}{depth};
00598   \textcolor{keywordtype}{int} found = \hyperlink{a00187_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC\_TYPE\_DEPTH\_UNKNOWN};
00599   \textcolor{keywordflow}{for} (depth=0; ; depth++) \{
00600     \hyperlink{a00238}{hwloc\_obj\_t} obj = \hyperlink{a00187_ga391f6b2613f0065673eaa4069b93d4e0}{hwloc\_get\_obj\_by\_depth}(topology, depth, 0);
00601     \textcolor{keywordflow}{if} (!obj)
00602       \textcolor{keywordflow}{break};
00603     \textcolor{keywordflow}{if} (!\hyperlink{a00198_ga395e48cd221d107e5891689624e1aec4}{hwloc\_obj\_type\_is\_dcache}(obj->\hyperlink{a00238_acc4f0803f244867e68fe0036800be5de}{type}) || obj->
      \hyperlink{a00238_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00242_ab5a8ae3bf490e6b1071fea53f7382836}{cache}.\hyperlink{a00254_a5c8f7f39193736c2187ed626940835d5}{depth} != cachelevel)
00604       \textcolor{comment}{/* doesn't match, try next depth */}
00605       \textcolor{keywordflow}{continue};
00606     \textcolor{keywordflow}{if} (cachetype == (\hyperlink{a00184_gab6e1e7efedae8b341f3ee14fbe53d66c}{hwloc\_obj\_cache\_type\_t}) -1) \{
00607       \textcolor{keywordflow}{if} (found != \hyperlink{a00187_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC\_TYPE\_DEPTH\_UNKNOWN}) \{
00608         \textcolor{comment}{/* second match, return MULTIPLE */}
00609         \textcolor{keywordflow}{return} \hyperlink{a00187_ggaf4e663cf42bbe20756b849c6293ef575ae99465995cacde6c210d5fc2e409798c}{HWLOC\_TYPE\_DEPTH\_MULTIPLE};
00610       \}
00611       \textcolor{comment}{/* first match, mark it as found */}
00612       found = \hyperlink{a00238_a4876fd165b4fff35521f07ebd85355ed}{depth};
00613       \textcolor{keywordflow}{continue};
00614     \}
00615     \textcolor{keywordflow}{if} (obj->\hyperlink{a00238_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00242_ab5a8ae3bf490e6b1071fea53f7382836}{cache}.\hyperlink{a00254_ad8edc8ded2b7a70d6abbc874801930f4}{type} == cachetype || obj->\hyperlink{a00238_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00242_ab5a8ae3bf490e6b1071fea53f7382836}{cache}.
      \hyperlink{a00254_ad8edc8ded2b7a70d6abbc874801930f4}{type} == \hyperlink{a00184_gga791c9875c8fe20f3e1e5871e0657e59ba3900b3b2db54941aac249e5a638a2d7a}{HWLOC\_OBJ\_CACHE\_UNIFIED})
00616       \textcolor{comment}{/* exact match (either unified is alone, or we match instruction or data), return immediately */}
00617       \textcolor{keywordflow}{return} \hyperlink{a00238_a4876fd165b4fff35521f07ebd85355ed}{depth};
00618   \}
00619   \textcolor{comment}{/* went to the bottom, return what we found */}
00620   \textcolor{keywordflow}{return} found;
00621 \}
00622 
00627 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
00628 \hyperlink{a00199_gac4cd480a5deaa4ada047fdd11ae4c070}{hwloc\_get\_cache\_covering\_cpuset} (\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, 
      \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \textcolor{keyword}{set}) \_\_hwloc\_attribute\_pure;
00629 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l00630}\hyperlink{a00199_gac4cd480a5deaa4ada047fdd11ae4c070}{00630} \hyperlink{a00199_gac4cd480a5deaa4ada047fdd11ae4c070}{hwloc\_get\_cache\_covering\_cpuset} (\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, 
      \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \textcolor{keyword}{set})
00631 \{
00632   \hyperlink{a00238}{hwloc\_obj\_t} current = \hyperlink{a00196_ga41acdcdbb8b95d70ecf6c572a3f67dca}{hwloc\_get\_obj\_covering\_cpuset}(topology, \textcolor{keyword}{set}
      );
00633   \textcolor{keywordflow}{while} (current) \{
00634     \textcolor{keywordflow}{if} (\hyperlink{a00198_ga395e48cd221d107e5891689624e1aec4}{hwloc\_obj\_type\_is\_dcache}(current->\hyperlink{a00238_acc4f0803f244867e68fe0036800be5de}{type}))
00635       \textcolor{keywordflow}{return} current;
00636     current = current->\hyperlink{a00238_adc494f6aed939992be1c55cca5822900}{parent};
00637   \}
00638   \textcolor{keywordflow}{return} NULL;
00639 \}
00640 
00645 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
00646 \hyperlink{a00199_ga36f48c32837c7a70b424706e213dcd71}{hwloc\_get\_shared\_cache\_covering\_obj} (
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology \_\_hwloc\_attribute\_unused, \hyperlink{a00238}{hwloc\_obj\_t} obj) 
      \_\_hwloc\_attribute\_pure;
00647 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l00648}\hyperlink{a00199_ga36f48c32837c7a70b424706e213dcd71}{00648} \hyperlink{a00199_ga36f48c32837c7a70b424706e213dcd71}{hwloc\_get\_shared\_cache\_covering\_obj} (
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology \_\_hwloc\_attribute\_unused, \hyperlink{a00238}{hwloc\_obj\_t} obj)
00649 \{
00650   \hyperlink{a00238}{hwloc\_obj\_t} current = obj->\hyperlink{a00238_adc494f6aed939992be1c55cca5822900}{parent};
00651   \textcolor{keywordflow}{if} (!obj->\hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00652     \textcolor{keywordflow}{return} NULL;
00653   \textcolor{keywordflow}{while} (current) \{
00654     \textcolor{keywordflow}{if} (!\hyperlink{a00205_ga32376b1405e57472b73c3aa53bb39663}{hwloc\_bitmap\_isequal}(current->\hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, obj->
      \hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset})
00655         && hwloc\_obj\_type\_is\_dcache(current->\hyperlink{a00238_acc4f0803f244867e68fe0036800be5de}{type}))
00656       \textcolor{keywordflow}{return} current;
00657     current = current->\hyperlink{a00238_adc494f6aed939992be1c55cca5822900}{parent};
00658   \}
00659   \textcolor{keywordflow}{return} NULL;
00660 \}
00661 
00691 HWLOC\_DECLSPEC \textcolor{keywordtype}{int} \hyperlink{a00200_ga050646458efc8ca1120d9f124c5ad861}{hwloc\_bitmap\_singlify\_per\_core}(
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \hyperlink{a00205_gaa3c2bf4c776d603dcebbb61b0c923d84}{hwloc\_bitmap\_t} \hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, \textcolor{keywordtype}{unsigned} which);
00692 
00702 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
00703 \hyperlink{a00200_ga751c238a4931db5cc0ca3181b7dd7479}{hwloc\_get\_pu\_obj\_by\_os\_index}(\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \textcolor{keywordtype}{
      unsigned} \hyperlink{a00238_a61a7a80a68eaccbaaa28269e678c81a9}{os\_index}) \_\_hwloc\_attribute\_pure;
00704 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l00705}\hyperlink{a00200_ga751c238a4931db5cc0ca3181b7dd7479}{00705} \hyperlink{a00200_ga751c238a4931db5cc0ca3181b7dd7479}{hwloc\_get\_pu\_obj\_by\_os\_index}(\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \textcolor{keywordtype}{
      unsigned} os\_index)
00706 \{
00707   \hyperlink{a00238}{hwloc\_obj\_t} obj = NULL;
00708   \textcolor{keywordflow}{while} ((obj = \hyperlink{a00187_ga759e88eaf5a230ad283e9d4c42486735}{hwloc\_get\_next\_obj\_by\_type}(topology, 
      \hyperlink{a00184_ggacd37bb612667dc437d66bfb175a8dc55abca6887e80cb291353b0a0c1da83f661}{HWLOC\_OBJ\_PU}, obj)) != NULL)
00709     \textcolor{keywordflow}{if} (obj->\hyperlink{a00238_a61a7a80a68eaccbaaa28269e678c81a9}{os\_index} == os\_index)
00710       \textcolor{keywordflow}{return} obj;
00711   \textcolor{keywordflow}{return} NULL;
00712 \}
00713 
00723 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
00724 \hyperlink{a00200_gab89d9ed9edfaa3dd526fb6ee1a1618ea}{hwloc\_get\_numanode\_obj\_by\_os\_index}(
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \textcolor{keywordtype}{unsigned} os\_index) \_\_hwloc\_attribute\_pure;
00725 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l00726}\hyperlink{a00200_gab89d9ed9edfaa3dd526fb6ee1a1618ea}{00726} \hyperlink{a00200_gab89d9ed9edfaa3dd526fb6ee1a1618ea}{hwloc\_get\_numanode\_obj\_by\_os\_index}(
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \textcolor{keywordtype}{unsigned} os\_index)
00727 \{
00728   \hyperlink{a00238}{hwloc\_obj\_t} obj = NULL;
00729   \textcolor{keywordflow}{while} ((obj = \hyperlink{a00187_ga759e88eaf5a230ad283e9d4c42486735}{hwloc\_get\_next\_obj\_by\_type}(topology, 
      \hyperlink{a00184_ggacd37bb612667dc437d66bfb175a8dc55a9d917a3e5497950c6d8948b8e183db5a}{HWLOC\_OBJ\_NUMANODE}, obj)) != NULL)
00730     \textcolor{keywordflow}{if} (obj->\hyperlink{a00238_a61a7a80a68eaccbaaa28269e678c81a9}{os\_index} == os\_index)
00731       \textcolor{keywordflow}{return} obj;
00732   \textcolor{keywordflow}{return} NULL;
00733 \}
00734 
00746 \textcolor{comment}{/* TODO: rather provide an iterator? Provide a way to know how much should be allocated? By returning the
       total number of objects instead? */}
00747 HWLOC\_DECLSPEC \textcolor{keywordtype}{unsigned} \hyperlink{a00200_ga2cd22a34360643f7f5bad09576dec205}{hwloc\_get\_closest\_objs} (
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \hyperlink{a00238}{hwloc\_obj\_t} src, 
      \hyperlink{a00238}{hwloc\_obj\_t} * \_\_hwloc\_restrict objs, \textcolor{keywordtype}{unsigned} max);
00748 
00761 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
00762 \hyperlink{a00200_ga7a0c1046851f7a88bd52f5a1d4ba0a97}{hwloc\_get\_obj\_below\_by\_type} (\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology,
00763                              \hyperlink{a00184_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_obj\_type\_t} type1, \textcolor{keywordtype}{unsigned} idx1,
00764                              \hyperlink{a00184_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_obj\_type\_t} type2, \textcolor{keywordtype}{unsigned} idx2) \_\_hwloc\_attribute\_pure;
00765 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l00766}\hyperlink{a00200_ga7a0c1046851f7a88bd52f5a1d4ba0a97}{00766} \hyperlink{a00200_ga7a0c1046851f7a88bd52f5a1d4ba0a97}{hwloc\_get\_obj\_below\_by\_type} (\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology,
00767                              \hyperlink{a00184_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_obj\_type\_t} type1, \textcolor{keywordtype}{unsigned} idx1,
00768                              \hyperlink{a00184_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_obj\_type\_t} type2, \textcolor{keywordtype}{unsigned} idx2)
00769 \{
00770   \hyperlink{a00238}{hwloc\_obj\_t} obj;
00771   obj = \hyperlink{a00187_ga6f414dd80a2b943967a0ac92da3181a2}{hwloc\_get\_obj\_by\_type} (topology, type1, idx1);
00772   \textcolor{keywordflow}{if} (!obj)
00773     \textcolor{keywordflow}{return} NULL;
00774   \textcolor{keywordflow}{return} \hyperlink{a00195_ga2edf924e5a0cca9cb22f65cc77c6ddb5}{hwloc\_get\_obj\_inside\_cpuset\_by\_type}(topology, obj->
      \hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, type2, idx2);
00775 \}
00776 
00795 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
00796 \hyperlink{a00200_gacb51295ff3fbd3a96f990f20c6492b1d}{hwloc\_get\_obj\_below\_array\_by\_type} (
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \textcolor{keywordtype}{int} nr, \hyperlink{a00184_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_obj\_type\_t} *typev, \textcolor{keywordtype}{unsigned} *idxv)
       \_\_hwloc\_attribute\_pure;
00797 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l00798}\hyperlink{a00200_gacb51295ff3fbd3a96f990f20c6492b1d}{00798} \hyperlink{a00200_gacb51295ff3fbd3a96f990f20c6492b1d}{hwloc\_get\_obj\_below\_array\_by\_type} (
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \textcolor{keywordtype}{int} nr, \hyperlink{a00184_gacd37bb612667dc437d66bfb175a8dc55}{hwloc\_obj\_type\_t} *typev, \textcolor{keywordtype}{unsigned} *idxv)
00799 \{
00800   \hyperlink{a00238}{hwloc\_obj\_t} obj = \hyperlink{a00187_ga2d4b12fc187dfc53b35f2fa21d21044d}{hwloc\_get\_root\_obj}(topology);
00801   \textcolor{keywordtype}{int} i;
00802   \textcolor{keywordflow}{for}(i=0; i<nr; i++) \{
00803     \textcolor{keywordflow}{if} (!obj)
00804       \textcolor{keywordflow}{return} NULL;
00805     obj = \hyperlink{a00195_ga2edf924e5a0cca9cb22f65cc77c6ddb5}{hwloc\_get\_obj\_inside\_cpuset\_by\_type}(topology, obj->
      \hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}, typev[i], idxv[i]);
00806   \}
00807   \textcolor{keywordflow}{return} obj;
00808 \}
00809 
\Hypertarget{a00122_source_l00820}\hyperlink{a00201_ga8b835295a52b6768a5e6c8abb1f9c54d}{00820} \textcolor{keyword}{enum} \hyperlink{a00201_ga8b835295a52b6768a5e6c8abb1f9c54d}{hwloc\_distrib\_flags\_e} \{
\Hypertarget{a00122_source_l00824}\hyperlink{a00201_gga8b835295a52b6768a5e6c8abb1f9c54da2ca08404bfbebe9ed5f34c3d7635425a}{00824}   \hyperlink{a00201_gga8b835295a52b6768a5e6c8abb1f9c54da2ca08404bfbebe9ed5f34c3d7635425a}{HWLOC\_DISTRIB\_FLAG\_REVERSE} = (1UL<<0)
00825 \};
00826 
00850 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\Hypertarget{a00122_source_l00851}\hyperlink{a00201_ga7b0c28f797c2ff17fa2f244ebbd55b33}{00851} \hyperlink{a00201_ga7b0c28f797c2ff17fa2f244ebbd55b33}{hwloc\_distrib}(\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology,
00852               \hyperlink{a00238}{hwloc\_obj\_t} *roots, \textcolor{keywordtype}{unsigned} n\_roots,
00853               \hyperlink{a00183_ga4bbf39b68b6f568fb92739e7c0ea7801}{hwloc\_cpuset\_t} *\textcolor{keyword}{set},
00854               \textcolor{keywordtype}{unsigned} n,
00855               \textcolor{keywordtype}{int} until, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} flags)
00856 \{
00857   \textcolor{keywordtype}{unsigned} i;
00858   \textcolor{keywordtype}{unsigned} tot\_weight;
00859   \textcolor{keywordtype}{unsigned} given, givenweight;
00860   \hyperlink{a00183_ga4bbf39b68b6f568fb92739e7c0ea7801}{hwloc\_cpuset\_t} *cpusetp = \textcolor{keyword}{set};
00861 
00862   \textcolor{keywordflow}{if} (flags & ~\hyperlink{a00201_gga8b835295a52b6768a5e6c8abb1f9c54da2ca08404bfbebe9ed5f34c3d7635425a}{HWLOC\_DISTRIB\_FLAG\_REVERSE}) \{
00863     errno = EINVAL;
00864     \textcolor{keywordflow}{return} -1;
00865   \}
00866 
00867   tot\_weight = 0;
00868   \textcolor{keywordflow}{for} (i = 0; i < n\_roots; i++)
00869     tot\_weight += (\textcolor{keywordtype}{unsigned}) \hyperlink{a00205_ga0200466842c0e1f5da75e84dde460b10}{hwloc\_bitmap\_weight}(roots[i]->cpuset);
00870 
00871   \textcolor{keywordflow}{for} (i = 0, given = 0, givenweight = 0; i < n\_roots; i++) \{
00872     \textcolor{keywordtype}{unsigned} chunk, weight;
00873     \hyperlink{a00238}{hwloc\_obj\_t} root = roots[flags & \hyperlink{a00201_gga8b835295a52b6768a5e6c8abb1f9c54da2ca08404bfbebe9ed5f34c3d7635425a}{HWLOC\_DISTRIB\_FLAG\_REVERSE} ? 
      n\_roots-1-i : i];
00874     \hyperlink{a00183_ga4bbf39b68b6f568fb92739e7c0ea7801}{hwloc\_cpuset\_t} cpuset = root->\hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset};
00875     \textcolor{keywordflow}{while} (!\hyperlink{a00198_ga52ef38431eba383b048b98c669b59a16}{hwloc\_obj\_type\_is\_normal}(root->\hyperlink{a00238_acc4f0803f244867e68fe0036800be5de}{type}))
00876       \textcolor{comment}{/* If memory/io/misc, walk up to normal parent */}
00877       root = root->\hyperlink{a00238_adc494f6aed939992be1c55cca5822900}{parent};
00878     weight = (unsigned) \hyperlink{a00205_ga0200466842c0e1f5da75e84dde460b10}{hwloc\_bitmap\_weight}(cpuset);
00879     \textcolor{keywordflow}{if} (!weight)
00880       \textcolor{keywordflow}{continue};
00881     \textcolor{comment}{/* Give to root a chunk proportional to its weight.}
00882 \textcolor{comment}{     * If previous chunks got rounded-up, we may get a bit less. */}
00883     chunk = (( (givenweight+weight) * n  + tot\_weight-1) / tot\_weight)
00884           - ((  givenweight         * n  + tot\_weight-1) / tot\_weight);
00885     \textcolor{keywordflow}{if} (!root->\hyperlink{a00238_aac3f6da35c9b57599909a44ce2b716c1}{arity} || chunk <= 1 || root->depth >= until) \{
00886       \textcolor{comment}{/* We can't split any more, put everything there.  */}
00887       \textcolor{keywordflow}{if} (chunk) \{
00888         \textcolor{comment}{/* Fill cpusets with ours */}
00889         \textcolor{keywordtype}{unsigned} j;
00890         \textcolor{keywordflow}{for} (j=0; j < chunk; j++)
00891           cpusetp[j] = \hyperlink{a00205_gae679434c1a5f41d3560a8a7e2c1b0dee}{hwloc\_bitmap\_dup}(cpuset);
00892       \} \textcolor{keywordflow}{else} \{
00893         \textcolor{comment}{/* We got no chunk, just merge our cpuset to a previous one}
00894 \textcolor{comment}{         * (the first chunk cannot be empty)}
00895 \textcolor{comment}{         * so that this root doesn't get ignored.}
00896 \textcolor{comment}{         */}
00897         assert(given);
00898         \hyperlink{a00205_ga120b8aefb9ce7ef349929656359b1859}{hwloc\_bitmap\_or}(cpusetp[-1], cpusetp[-1], cpuset);
00899       \}
00900     \} \textcolor{keywordflow}{else} \{
00901       \textcolor{comment}{/* Still more to distribute, recurse into children */}
00902       \hyperlink{a00201_ga7b0c28f797c2ff17fa2f244ebbd55b33}{hwloc\_distrib}(topology, root->\hyperlink{a00238_a04d05403da37bfe17cd63b7c7dd07b1f}{children}, root->\hyperlink{a00238_aac3f6da35c9b57599909a44ce2b716c1}{arity}, cpusetp, chunk, until,
       flags);
00903     \}
00904     cpusetp += chunk;
00905     given += chunk;
00906     givenweight += weight;
00907   \}
00908 
00909   \textcolor{keywordflow}{return} 0;
00910 \}
00911 
00929 HWLOC\_DECLSPEC \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t}
00930 \hyperlink{a00202_gaee30e03391c1ed7dfd617fb5c7bbb033}{hwloc\_topology\_get\_complete\_cpuset}(
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology) \_\_hwloc\_attribute\_pure;
00931 
00943 HWLOC\_DECLSPEC \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t}
00944 \hyperlink{a00202_ga79212faa07b70dd26588941b17d9fa82}{hwloc\_topology\_get\_topology\_cpuset}(
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology) \_\_hwloc\_attribute\_pure;
00945 
00962 HWLOC\_DECLSPEC \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t}
00963 \hyperlink{a00202_ga517d5d68ec9f24583d8933aab713be8e}{hwloc\_topology\_get\_allowed\_cpuset}(
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology) \_\_hwloc\_attribute\_pure;
00964 
00974 HWLOC\_DECLSPEC \hyperlink{a00183_ga2f5276235841ad66a79bedad16a5a10c}{hwloc\_const\_nodeset\_t}
00975 \hyperlink{a00202_ga773fd98949461ef4c1e3170bb0c0418f}{hwloc\_topology\_get\_complete\_nodeset}(
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology) \_\_hwloc\_attribute\_pure;
00976 
00988 HWLOC\_DECLSPEC \hyperlink{a00183_ga2f5276235841ad66a79bedad16a5a10c}{hwloc\_const\_nodeset\_t}
00989 \hyperlink{a00202_ga3fd37303e99ace8b0d0ea03f95f8c514}{hwloc\_topology\_get\_topology\_nodeset}(
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology) \_\_hwloc\_attribute\_pure;
00990 
01007 HWLOC\_DECLSPEC \hyperlink{a00183_ga2f5276235841ad66a79bedad16a5a10c}{hwloc\_const\_nodeset\_t}
01008 \hyperlink{a00202_ga21a4d7237a11e76b912ed4524ab78cbd}{hwloc\_topology\_get\_allowed\_nodeset}(
      \hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology) \_\_hwloc\_attribute\_pure;
01009 
01030 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\Hypertarget{a00122_source_l01031}\hyperlink{a00203_ga185751c1653fedbeb7cc480840f38cde}{01031} \hyperlink{a00203_ga185751c1653fedbeb7cc480840f38cde}{hwloc\_cpuset\_to\_nodeset}(\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, 
      \hyperlink{a00183_ga1f784433e9b606261f62d1134f6a3b25}{hwloc\_const\_cpuset\_t} \_cpuset, \hyperlink{a00183_ga37e35730fa7e775b5bb0afe893d6d508}{hwloc\_nodeset\_t} 
      \hyperlink{a00238_a08f0d0e16c619a6e653526cbee4ffea3}{nodeset})
01032 \{
01033         \textcolor{keywordtype}{int} depth = \hyperlink{a00187_ga8bec782e21be313750da70cf7428b374}{hwloc\_get\_type\_depth}(topology, 
      \hyperlink{a00184_ggacd37bb612667dc437d66bfb175a8dc55a9d917a3e5497950c6d8948b8e183db5a}{HWLOC\_OBJ\_NUMANODE});
01034         \hyperlink{a00238}{hwloc\_obj\_t} obj = NULL;
01035         assert(depth != \hyperlink{a00187_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC\_TYPE\_DEPTH\_UNKNOWN});
01036         \hyperlink{a00205_gaa97c5217613c8cae9862287170ea2132}{hwloc\_bitmap\_zero}(nodeset);
01037         \textcolor{keywordflow}{while} ((obj = \hyperlink{a00196_gaba4b6d86eba1169ced4b0e941d2bb5f0}{hwloc\_get\_next\_obj\_covering\_cpuset\_by\_depth}
      (topology, \_cpuset, depth, obj)) != NULL)
01038                 \textcolor{keywordflow}{if} (\hyperlink{a00205_ga062dbff93baeff3b425a7260c5463646}{hwloc\_bitmap\_set}(nodeset, obj->\hyperlink{a00238_a61a7a80a68eaccbaaa28269e678c81a9}{os\_index}) < 0)
01039                         \textcolor{keywordflow}{return} -1;
01040         \textcolor{keywordflow}{return} 0;
01041 \}
01042 
01054 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\Hypertarget{a00122_source_l01055}\hyperlink{a00203_gad5ee8691e08a3538ea7633344c00456d}{01055} \hyperlink{a00203_gad5ee8691e08a3538ea7633344c00456d}{hwloc\_cpuset\_from\_nodeset}(\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, 
      \hyperlink{a00183_ga4bbf39b68b6f568fb92739e7c0ea7801}{hwloc\_cpuset\_t} \_cpuset, \hyperlink{a00183_ga2f5276235841ad66a79bedad16a5a10c}{hwloc\_const\_nodeset\_t} 
      \hyperlink{a00238_a08f0d0e16c619a6e653526cbee4ffea3}{nodeset})
01056 \{
01057         \textcolor{keywordtype}{int} depth = \hyperlink{a00187_ga8bec782e21be313750da70cf7428b374}{hwloc\_get\_type\_depth}(topology, 
      \hyperlink{a00184_ggacd37bb612667dc437d66bfb175a8dc55a9d917a3e5497950c6d8948b8e183db5a}{HWLOC\_OBJ\_NUMANODE});
01058         \hyperlink{a00238}{hwloc\_obj\_t} obj = NULL;
01059         assert(depth != \hyperlink{a00187_ggaf4e663cf42bbe20756b849c6293ef575a0565ab92ab72cb0cec91e23003294aad}{HWLOC\_TYPE\_DEPTH\_UNKNOWN});
01060         \hyperlink{a00205_gaa97c5217613c8cae9862287170ea2132}{hwloc\_bitmap\_zero}(\_cpuset);
01061         \textcolor{keywordflow}{while} ((obj = \hyperlink{a00187_gac140a9b939d9fa0b30c4a910efcb0656}{hwloc\_get\_next\_obj\_by\_depth}(topology, depth, obj)) != NULL
      ) \{
01062                 \textcolor{keywordflow}{if} (\hyperlink{a00205_ga11340dd487f110bb84f0a6e4ae90bd06}{hwloc\_bitmap\_isset}(nodeset, obj->\hyperlink{a00238_a61a7a80a68eaccbaaa28269e678c81a9}{os\_index}))
01063                         \textcolor{comment}{/* no need to check obj->cpuset because objects in levels always have a cpuset */}
01064                         \textcolor{keywordflow}{if} (\hyperlink{a00205_ga120b8aefb9ce7ef349929656359b1859}{hwloc\_bitmap\_or}(\_cpuset, \_cpuset, obj->
      \hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}) < 0)
01065                                 \textcolor{keywordflow}{return} -1;
01066         \}
01067         \textcolor{keywordflow}{return} 0;
01068 \}
01069 
01089 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l01090}\hyperlink{a00204_gaf139bb61375178e90cc3f1835b452ab6}{01090} \hyperlink{a00204_gaf139bb61375178e90cc3f1835b452ab6}{hwloc\_get\_non\_io\_ancestor\_obj}(\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology 
      \_\_hwloc\_attribute\_unused,
01091                               \hyperlink{a00238}{hwloc\_obj\_t} ioobj)
01092 \{
01093   \hyperlink{a00238}{hwloc\_obj\_t} obj = ioobj;
01094   \textcolor{keywordflow}{while} (obj && !obj->\hyperlink{a00238_a67925e0f2c47f50408fbdb9bddd0790f}{cpuset}) \{
01095     obj = obj->\hyperlink{a00238_adc494f6aed939992be1c55cca5822900}{parent};
01096   \}
01097   \textcolor{keywordflow}{return} obj;
01098 \}
01099 
01104 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l01105}\hyperlink{a00204_ga66470dabce9db19a57c5940a909d0baa}{01105} \hyperlink{a00204_ga66470dabce9db19a57c5940a909d0baa}{hwloc\_get\_next\_pcidev}(\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, 
      \hyperlink{a00238}{hwloc\_obj\_t} prev)
01106 \{
01107   \textcolor{keywordflow}{return} \hyperlink{a00187_ga759e88eaf5a230ad283e9d4c42486735}{hwloc\_get\_next\_obj\_by\_type}(topology, 
      \hyperlink{a00184_ggacd37bb612667dc437d66bfb175a8dc55a5d8117a54df1fbd3606ab19e42cb0ea9}{HWLOC\_OBJ\_PCI\_DEVICE}, prev);
01108 \}
01109 
01113 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l01114}\hyperlink{a00204_gacdbaf0db98872e224b7883a84bfb0455}{01114} \hyperlink{a00204_gacdbaf0db98872e224b7883a84bfb0455}{hwloc\_get\_pcidev\_by\_busid}(\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology,
01115                           \textcolor{keywordtype}{unsigned} domain, \textcolor{keywordtype}{unsigned} bus, \textcolor{keywordtype}{unsigned} dev, \textcolor{keywordtype}{unsigned} func)
01116 \{
01117   \hyperlink{a00238}{hwloc\_obj\_t} obj = NULL;
01118   \textcolor{keywordflow}{while} ((obj = \hyperlink{a00204_ga66470dabce9db19a57c5940a909d0baa}{hwloc\_get\_next\_pcidev}(topology, obj)) != NULL) \{
01119     \textcolor{keywordflow}{if} (obj->\hyperlink{a00238_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00242_a4203d713ce0f5beaa6ee0e9bdac70828}{pcidev}.\hyperlink{a00262_a8fba44988deb98613c1505a4019a34dc}{domain} == domain
01120         && obj->\hyperlink{a00238_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00242_a4203d713ce0f5beaa6ee0e9bdac70828}{pcidev}.\hyperlink{a00262_aae99e035e8d1387d7b8768aaa8eceb0a}{bus} == bus
01121         && obj->\hyperlink{a00238_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00242_a4203d713ce0f5beaa6ee0e9bdac70828}{pcidev}.\hyperlink{a00262_a3d70c84a12f7e93d14c8d47bf4fd9dc5}{dev} == dev
01122         && obj->\hyperlink{a00238_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00242_a4203d713ce0f5beaa6ee0e9bdac70828}{pcidev}.\hyperlink{a00262_a695f32df53f4ef728670bfcf31b74e0f}{func} == func)
01123       \textcolor{keywordflow}{return} obj;
01124   \}
01125   \textcolor{keywordflow}{return} NULL;
01126 \}
01127 
01131 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l01132}\hyperlink{a00204_ga23a978469353134b3104b846fe2efceb}{01132} \hyperlink{a00204_ga23a978469353134b3104b846fe2efceb}{hwloc\_get\_pcidev\_by\_busidstring}(\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, \textcolor{keyword}{
      const} \textcolor{keywordtype}{char} *busid)
01133 \{
01134   \textcolor{keywordtype}{unsigned} domain = 0; \textcolor{comment}{/* default */}
01135   \textcolor{keywordtype}{unsigned} bus, dev, func;
01136 
01137   \textcolor{keywordflow}{if} (sscanf(busid, \textcolor{stringliteral}{"%x:%x.%x"}, &bus, &dev, &func) != 3
01138       && sscanf(busid, \textcolor{stringliteral}{"%x:%x:%x.%x"}, &domain, &bus, &dev, &func) != 4) \{
01139     errno = EINVAL;
01140     \textcolor{keywordflow}{return} NULL;
01141   \}
01142 
01143   \textcolor{keywordflow}{return} \hyperlink{a00204_gacdbaf0db98872e224b7883a84bfb0455}{hwloc\_get\_pcidev\_by\_busid}(topology, domain, bus, dev, func);
01144 \}
01145 
01150 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l01151}\hyperlink{a00204_ga8b4584c8949e2c5f1c97ba7fe92b8145}{01151} \hyperlink{a00204_ga8b4584c8949e2c5f1c97ba7fe92b8145}{hwloc\_get\_next\_osdev}(\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, 
      \hyperlink{a00238}{hwloc\_obj\_t} prev)
01152 \{
01153   \textcolor{keywordflow}{return} \hyperlink{a00187_ga759e88eaf5a230ad283e9d4c42486735}{hwloc\_get\_next\_obj\_by\_type}(topology, 
      \hyperlink{a00184_ggacd37bb612667dc437d66bfb175a8dc55a51e7280240fd9f25589cbbe538bdb075}{HWLOC\_OBJ\_OS\_DEVICE}, prev);
01154 \}
01155 
01160 \textcolor{keyword}{static} \_\_hwloc\_inline \hyperlink{a00238}{hwloc\_obj\_t}
\Hypertarget{a00122_source_l01161}\hyperlink{a00204_ga9dba22a3f4f701f2a46780ba9a0bbbe7}{01161} \hyperlink{a00204_ga9dba22a3f4f701f2a46780ba9a0bbbe7}{hwloc\_get\_next\_bridge}(\hyperlink{a00186_ga9d1e76ee15a7dee158b786c30b6a6e38}{hwloc\_topology\_t} topology, 
      \hyperlink{a00238}{hwloc\_obj\_t} prev)
01162 \{
01163   \textcolor{keywordflow}{return} \hyperlink{a00187_ga759e88eaf5a230ad283e9d4c42486735}{hwloc\_get\_next\_obj\_by\_type}(topology, 
      \hyperlink{a00184_ggacd37bb612667dc437d66bfb175a8dc55a6825f10895fea60aca7a6ba9fe273db0}{HWLOC\_OBJ\_BRIDGE}, prev);
01164 \}
01165 
01166 \textcolor{comment}{/* \(\backslash\)brief Checks whether a given bridge covers a given PCI bus.}
01167 \textcolor{comment}{ */}
01168 \textcolor{keyword}{static} \_\_hwloc\_inline \textcolor{keywordtype}{int}
\Hypertarget{a00122_source_l01169}\hyperlink{a00204_ga0d92a9462a3d317f29ecb4442a307fb1}{01169} \hyperlink{a00204_ga0d92a9462a3d317f29ecb4442a307fb1}{hwloc\_bridge\_covers\_pcibus}(\hyperlink{a00238}{hwloc\_obj\_t} bridge,
01170                            \textcolor{keywordtype}{unsigned} domain, \textcolor{keywordtype}{unsigned} bus)
01171 \{
01172   \textcolor{keywordflow}{return} bridge->\hyperlink{a00238_acc4f0803f244867e68fe0036800be5de}{type} == \hyperlink{a00184_ggacd37bb612667dc437d66bfb175a8dc55a6825f10895fea60aca7a6ba9fe273db0}{HWLOC\_OBJ\_BRIDGE}
01173     && bridge->\hyperlink{a00238_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00242_adbdf280699dd84c7619cd8d9edc0d958}{bridge}.\hyperlink{a00266_ac6a169b672d0e9f75756fd5665828b93}{downstream\_type} == 
      \hyperlink{a00184_gga48a4803c72574191d7ead1c62aaf9860a8f3b4cecf3dab6073d74696d10863c60}{HWLOC\_OBJ\_BRIDGE\_PCI}
01174     && bridge->\hyperlink{a00238_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00242_adbdf280699dd84c7619cd8d9edc0d958}{bridge}.\hyperlink{a00266_acaf1ae02e37182bbb6966f8c4f35e499}{downstream}.\hyperlink{a00266_ab5c564e7c95b747dae9eb84ec0a2c31e}{pci}.\hyperlink{a00262_a8fba44988deb98613c1505a4019a34dc}{domain} == domain
01175     && bridge->\hyperlink{a00238_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00242_adbdf280699dd84c7619cd8d9edc0d958}{bridge}.\hyperlink{a00266_acaf1ae02e37182bbb6966f8c4f35e499}{downstream}.\hyperlink{a00266_ab5c564e7c95b747dae9eb84ec0a2c31e}{pci}.secondary\_bus <= bus
01176     && bridge->\hyperlink{a00238_accd40e29f71f19e88db62ea3df02adc8}{attr}->\hyperlink{a00242_adbdf280699dd84c7619cd8d9edc0d958}{bridge}.\hyperlink{a00266_acaf1ae02e37182bbb6966f8c4f35e499}{downstream}.\hyperlink{a00266_ab5c564e7c95b747dae9eb84ec0a2c31e}{pci}.subordinate\_bus >= bus;
01177 \}
01178 
01183 \textcolor{preprocessor}{#ifdef \_\_cplusplus}
01184 \} \textcolor{comment}{/* extern "C" */}
01185 \textcolor{preprocessor}{#endif}
01186 
01187 
01188 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* HWLOC\_HELPER\_H */}\textcolor{preprocessor}{}
\end{DoxyCode}
